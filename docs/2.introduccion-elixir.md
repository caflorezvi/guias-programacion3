```
Universidad del Quindío
Programa de Ingeniería de Sistemas y Computación
Programación III - Introducción a Elixir
Docente: Carlos Andrés Florez V.
```

# Elixir

[Elixir](https://elixir-lang.org) es un lenguaje de programación **funcional, concurrente y de propósito general** que se ejecuta sobre la máquina virtual de [Erlang](https://www.erlang.org) (BEAM).

Fue creado por **José Valim** en 2011 con la idea de combinar:

- La robustez, tolerancia a fallos y capacidad de concurrencia del ecosistema Erlang.
- Una sintaxis más moderna, limpia y expresiva, inspirada en lenguajes como Ruby.

## BEAM

La máquina virtual de Erlang (BEAM) es el motor de ejecución donde corren los programas escritos en Erlang y en otros lenguajes compatibles, como Elixir.

En pocas palabras, es para Elixir lo que la JVM es para Java: un entorno especializado que interpreta y ejecuta el código.

## Características clave de Elixir:

- **Funcional:** promueve funciones puras, inmutabilidad y un estilo declarativo.
- **Concurrente:** usa el modelo de actores de Erlang para manejar miles de procesos ligeros de forma eficiente.
- **Escalable y tolerante a fallos:** ideal para sistemas distribuidos y aplicaciones que no pueden detenerse.
- **Interoperable:** puede usar directamente librerías de Erlang.
- **Productivo:** su sintaxis y herramientas (como Mix y ExUnit) facilitan el desarrollo rápido y seguro.

## Usos comunes:

Aunque Elixir puede usarse para muchos tipos de aplicaciones, es especialmente popular en:

- Desarrollo de aplicaciones web (con el framework Phoenix).
- Sistemas de mensajería y comunicación en tiempo real.
- Servicios backend de alta concurrencia y baja latencia.

---

## Elixir a nivel empresarial

Según la [página oficial de elixir](https://elixir-lang.org/cases.html) y [un artículo de Netguru](https://www.netguru.com/blog/10-companies-use-elixir) estos son algunos ejemplos de su uso a nivel empresarial:
- **Discord:** plataforma de comunicación en tiempo real.
- **Heroku:** plataforma como servicio (PaaS) en la nube.
- **PepsiCo:** empresa multinacional de alimentos y bebidas.
- **Whatsapp:** aplicación de mensajería instantánea.
- **Pinterest:** red social visual como imágenes y videos.

---

## Ambiente de trabajo con Elixir

Elixir puede ser instalado en diferentes arquitecturas y sistemas operativos: GNU/Linux (diferentes distribuciones), MacOS, Windows; incluso existen aplicaciones para dispositivos móviles que permiten trabajar con Elixir.


### 1. Instalación Elixir y Erlang
Ingrese a [https://elixir-lang.org/install.html](https://elixir-lang.org/install.html) e instale Erlang y Elixir en su sistema. Tenga en cuenta que Elixir depende de Erlang, por lo que primero debe instalar Erlang y luego Elixir.

Para verificar que todo se haya instalado correctamente, abra una terminal (CMD en windows) y ejecute el siguiente comando:

```bash
elixir -v
```

Esto debería mostrar la versión de Elixir instalada.

### 2. Primer programa en Elixir

El primer programa que se suele escribir en cualquier lenguaje de programación es "¡Hola, mundo!". En Elixir, puede hacerlo de dos maneras: usando el intérprete interactivo (IEx) o creando un archivo `.exs` y ejecutándolo.

El **intérprete interactivo (IEx)** es una herramienta que permite escribir y ejecutar código Elixir línea por línea, lo que facilita la experimentación y el aprendizaje del lenguaje. No está diseñado para ejecutar programas completos, sino para probar fragmentos de código y explorar las características del lenguaje de manera interactiva.

En la terminal, escriba el siguiente comando para iniciar el intérprete interactivo de Elixir (IEx):

```bash
iex
```

Y escriba lo siguiente:

```elixir
IO.puts("¡Hola, mundo!")
```

Al dar **Enter**, debería ver lo siguiente en la consola.

```bash
¡Hola, mundo!
:ok
```

`IO` es un módulo que proporciona funciones para realizar operaciones de entrada y salida. La función `puts` se utiliza para imprimir texto en la consola. El resultado `:ok` indica que la operación se realizó correctamente.

>**⚠️ Importante:** Para salir de `iex`, puede presionar `Ctrl + C` dos veces. Tambien puede resultar útil acceder al menú de ayuda escribiendo `h()` y luego presionando **Enter**, en este menú de ayuda encontrará información sobre las funciones disponibles y cómo utilizarlas.

---

## Trabajar desde Visual Studio Code (VS Code)

Para programar en Elixir, es recomendable usar un editor de código fuente que facilite la escritura y ejecución del código. Uno de los editores más populares y ampliamente utilizados es **Visual Studio Code (VS Code)**.

### 1. Instalación de Git

Instale Git desde [https://git-scm.com/downloads](https://git-scm.com/downloads) ya que será necesario para el control de versiones. Es importante que el código fuente de sus proyectos esté bajo control de versiones.

### 2. Instalación de Visual Studio Code

Ingrese a [https://code.visualstudio.com/Download](https://code.visualstudio.com/Download) e instale Visual Studio Code. Visual Studio Code es un editor de código ampliamente utilizado en la industria del software, con soporte para múltiples lenguajes de programación, incluyendo Elixir. 

Una de sus características más destacadas es su extensibilidad a través de una amplia variedad de extensiones que mejoran la funcionalidad del editor.

### 3. Instalar extensiones en Visual Studio Code

Ingrese a Visual Studio Code (VS Code) instale las siguientes Extensiones:
   - [ElixirLS: Elixir support and debugger for VS Code](https://marketplace.visualstudio.com/items?itemName=JakeBecker.elixir-ls).
   - [Code Runner](https://marketplace.visualstudio.com/items?itemName=formulahendry.code-runner) (opcional).

### 4. Crear y ejecutar un programa en Elixir desde Visual Studio Code

Cree un archivo llamado `saludo.exs` y ábralo en Visual Studio Code. Después, escriba el siguiente código en el archivo:

```elixir
IO.puts("¡Hola, mundo!")
```
Ejecute el programa usando el siguiente comando en la terminal (asegúrese de ejecutarlo en la carpeta donde se encuentra el archivo):

```bash
elixir saludo.exs
```

Al ejecutar el programa, debería ver lo siguiente en la consola:

```bash
¡Hola, mundo!
```

> **⚠️ Importante:** También puede ejecutar el programa directamente desde Visual Studio Code utilizando la extensión **Code Runner**. Para ello, haga clic en el botón de ejecución (▶️) que aparece en la esquina superior derecha del editor. Esto ejecutará el código y mostrará la salida en la ventana de salida integrada de Visual Studio Code.

---

## Programación funcional

La **programación funcional** es un paradigma de programación en el que el código se organiza en torno a funciones puras y datos inmutables, centrándose en qué se quiere lograr en lugar de cómo hacerlo paso a paso.

En lugar de modificar variables y estados globales, la programación funcional transforma datos mediante la aplicación de funciones, evitando efectos secundarios y haciendo el código más predecible. Esto facilita la depuración, las pruebas y el mantenimiento del código.

Algunas características clave de la programación funcional incluyen:

### 1. Inmutabilidad

Los datos no cambian una vez que se crean. En lugar de modificar estructuras existentes, se crean nuevas versiones con los cambios aplicados. Esto reduce errores relacionados con efectos secundarios y hace el código más predecible.

Ejemplo:

```elixir
a = 10
a = a + 5  # Aquí no se modifica 'a', sino que se crea una nueva variable 'a' con el nuevo valor.
IO.puts(a)  # Imprime 15
```

Cuando se asigna un nuevo valor a `a`, en realidad se está creando una nueva variable `a` que apunta al nuevo valor (15), mientras que la variable original `a` (con valor 10) ya no está accesible. Nunca se modifica el valor original.

La inmutabilidad es especialmente útil en **entornos concurrentes**, ya que evita problemas de sincronización y condiciones de carrera. Esto lo estudiaremos más a fondo en las próximas clases.

### 2. Funciones Puras

Una función es pura si:

- Siempre devuelve el mismo resultado para los mismos argumentos
- No tiene efectos secundarios (no modifica variables externas)
- En elixir todas las funciones son **puras por defecto**.
  
Esto facilita la depuración y las pruebas unitarias. Por ejemplo:

```elixir
def suma(x, y) do
  x + y
end
```

Toda función en Elixir comienza con `def`, seguida del nombre de la función y sus parámetros entre paréntesis. El cuerpo de la función se encuentra entre `do` y `end`.

Esta función siempre devolverá el mismo resultado para los mismos valores de `x` e `y`, y no afecta ninguna variable externa.

### 3. Expresiones Lambda

Son funciones anónimas que pueden almacenarse en variables o pasarse como argumentos.

Ejemplo:

```elixir
suma = fn (x, y) -> x + y end
IO.puts(suma.(3, 4))  # Imprime 7
```

Una expresión lambda se define con `fn`, seguida de los parámetros entre paréntesis, el operador `->`, y el cuerpo de la función en una sola línea terminada con `end`. Para llamar a una función anónima, se utiliza el operador `.` seguido de los argumentos entre paréntesis.

Hay otra forma de definir funciones anónimas usando el operador `&` que veremos más adelante.

### 4. Funciones de Orden Superior

Las funciones pueden recibir otras funciones como parámetros o devolver funciones como resultado.

Ejemplo:

```elixir
def aplicar_funcion(func, valor) do
  func.(valor)
end
IO.puts(aplicar_funcion(fn x -> x * 2 end, 5))  # Imprime 10
```

Las funciones son **ciudadanos de primera clase**, lo que significa que pueden ser tratadas como cualquier otro valor (asignadas a variables, pasadas como argumentos, etc.). Observe que en el ejemplo anterior, la función anónima `fn x -> x * 2 end` se pasa como argumento a la función `aplicar_funcion`. Esta función luego la invoca con el valor `5`, resultando en `10`.

### 5. Evaluación Perezosa (Lazy Evaluation)

Los valores y expresiones solo se calculan cuando realmente se necesitan. Permite trabajar con estructuras potencialmente infinitas y optimiza el rendimiento. Es especialmente útil en el manejo de archivos grandes.

### 6. Composición de Funciones

En lugar de usar estructuras de control tradicionales, se combinan funciones pequeñas para crear funciones más complejas. En Elixir, esto se puede lograr utilizando el **operador de tubería o pipe** (`|>`), que permite encadenar funciones de manera clara y concisa.

Ejemplo:

```elixir
def doble(x), do: x * 2
def cuadrado(x), do: x * x

resultado = 3 |> doble() |> cuadrado()
IO.puts(resultado)  # Imprime 36
```

El número `3` se pasa primero a la función `doble`, y luego el resultado de `doble(3)` se pasa a la función `cuadrado`. Internamente, esto es equivalente a `cuadrado(doble(3))`, pero la sintaxis con tuberías es más legible y clara.

También observe que para funciones de una sola línea, Elixir permite usar la sintaxis `do:` para definirlas de manera más concisa.

> ⚠️ **Importante:** Se profundizará en estos conceptos en las próximas clases, ya que son la base de la programación funcional.

---

## Actividad

Pruebe los ejemplos anteriores en Visual Studio Code (VS Code) o en el intérprete interactivo (IEx) y haga modificaciones para entender mejor cómo funcionan.

---

## Para la próxima clase
- Investigar qué es un módulo en Elixir.
- Investigar qué tipos de datos existen en Elixir.
- Investigar qué operadores se utilizan con más frecuencia en Elixir.