```
Universidad del QuindÃ­o  
Programa de IngenierÃ­a de Sistemas y ComputaciÃ³n  
ProgramaciÃ³n III - Proyecto Final  
Docente: Carlos AndrÃ©s FlÃ³rez V.
```

# ğŸ® Proyecto Final â€“ Trivia Multijugador en Elixir

## ğŸ“Œ DescripciÃ³n General

Se debe implementar un **juego multijugador en lÃ­nea de preguntas y respuestas**.

Varios usuarios se conectan en tiempo real a travÃ©s de la **lÃ­nea de comandos (CLI)**, y el sistema gestiona partidas independientes con sus propias preguntas.

El objetivo es acumular la mayor cantidad de puntos respondiendo correctamente.

---

## ğŸ¯ Objetivos de Aprendizaje

* Aplicar conceptos de **concurrencia y procesos** en Elixir.
* DiseÃ±ar e implementar sistemas distribuidos mediante **GenServers** y **Supervisores dinÃ¡micos**.
* Manejar **persistencia de datos** en archivos de texto plano.
* Construir un sistema interactivo en tiempo real con manejo de **usuarios, partidas y ranking**.

---

## âœ… Funcionalidades Requeridas

### 1. GestiÃ³n de Usuarios

* Registro y login de jugadores.
* Usuarios almacenados en `users.dat` (nombre, contraseÃ±a, puntaje acumulado).
* Consultar puntaje propio (`score`).
* Ranking histÃ³rico global, con opciÃ³n de filtrar por tema.

### 2. ConexiÃ³n al Servidor

* Conectarse (`connect username password`).

  * Si el usuario no existe â†’ se registra automÃ¡ticamente.
* Desconectarse (`disconnect`).
* Consultar lista de partidas disponibles (`list_games`).

### 3. Concurrencia

* Varios usuarios pueden conectarse simultÃ¡neamente.
* Cada partida es un proceso independiente implementado con **GenServer**.
* MÃºltiples partidas pueden ejecutarse en paralelo bajo un **DynamicSupervisor**.

### 4. GestiÃ³n de Partidas

* Crear partida (`create_game tema=ciencia preguntas=5 tiempo=15s`).
* Unirse a una partida (`join_game game_id`).
* Cada partida tiene un mÃ¡ximo de jugadores (ej. 4).
* Una vez iniciada o llena, no admite mÃ¡s jugadores.
* El creador puede iniciar la partida (`start_game`).
* El sistema envÃ­a preguntas a todos los jugadores en la partida.

### 5. DinÃ¡mica del Juego

* Las preguntas se seleccionan aleatoriamente de `questions.dat`, filtradas por tema.
* El servidor envÃ­a una pregunta a todos los jugadores con un temporizador (ej. 15 segundos).
* Los jugadores responden (`answer 1 B`).
* Reglas de puntaje:

  * +10 puntos por respuesta correcta.
  * â€“5 puntos por respuesta incorrecta.
* Solo se valida la **primera respuesta enviada** por cada jugador.

### 6. Resultados y Ranking

* Al terminar las rondas, el sistema muestra un ranking de la partida.
* Se guarda en `results.log` el historial: fecha, tema, ganador y puntajes finales.
* Se actualiza el puntaje acumulado de los jugadores en `users.dat`.

### 7. Persistencia

* **users.dat**: usuarios y puntajes acumulados.
* **results.log**: historial de partidas (texto plano).
* **questions.dat**: banco de preguntas clasificadas por tema.
* Formato recomendado: **CSV o JSON**, simple y editable.

### 8. Concurrencia y Tiempo Real

* Soporte para mÃºltiples jugadores conectados.
* Temporizador por cada pregunta.
* Al expirar el tiempo: se anuncia la respuesta correcta y se pasa a la siguiente pregunta.
* Las partidas son **independientes y no interfieren entre sÃ­**.

---

## âš™ï¸ TecnologÃ­as y Conceptos de Elixir

Se requiere el uso de las siguientes tecnologÃ­as y conceptos:

* **Mix**: estructura del proyecto y gestiÃ³n de dependencias (si es necesario).
* **GenServer**: cada partida es un proceso concurrente.
* **DynamicSupervisor**: gestiÃ³n de procesos de partidas activas.
* **Agents**: si lo considera necesario para manejar estados compartidos.
* **Archivos de texto**: persistencia de usuarios, preguntas y resultados.
* **Pruebas unitarias**: programar al menos 5 pruebas con ExUnit.
* **Manejo de errores y excepciones propias**: casos como:

  * Usuario no registrado.
  * Respuesta invÃ¡lida.
  * Partida llena o ya iniciada.

---

## ğŸ”„ Flujo de Juego â€“ Ejemplo

Se presenta un ejemplo simplificado del flujo de una partida:

1. Pedro y Carlos se conectan al servidor.

2. Pedro crea una partida de **Ciencia**, con 5 preguntas y 15s por pregunta.

3. Carlos se une a la partida.

4. El sistema anuncia:

   ```
   Pregunta 1: Â¿CuÃ¡l es el planeta mÃ¡s grande del sistema solar?
   A) Marte   B) JÃºpiter   C) Saturno   D) Neptuno
   Tiempo: 15 segundos
   ```

5. Pedro responde con `answer 1 B` â†’ Correcto, +10 puntos.

6. Carlos responde con `answer 1 C` â†’ Incorrecto, â€“5 puntos.

7. Al terminar las 5 preguntas, se muestra el ranking final:

   ```
   Pedro: 40 puntos
   Carlos: -10 puntos
   Ganador: Pedro
   ```

8. El resultado se guarda en `results.log` y se actualizan los puntajes globales.

---

## ğŸ“‚ Estructura Recomendada de Archivos

Se sugiere la siguiente estructura para el proyecto, pero puede cambiar si lo considera necesario:

```
proyecto_trivia/
â”‚â”€â”€ lib/
â”‚   â”œâ”€â”€ trivia/
â”‚   â”‚   â”œâ”€â”€ server.ex        # Servidor principal
â”‚   â”‚   â”œâ”€â”€ game.ex          # LÃ³gica de partida (GenServer)
â”‚   â”‚   â”œâ”€â”€ supervisor.ex    # DynamicSupervisor de partidas
â”‚   â”‚   â”œâ”€â”€ user_manager.ex  # GestiÃ³n de usuarios
â”‚   â”‚   â””â”€â”€ question_bank.ex # Manejo de preguntas
â”‚â”€â”€ data/
â”‚   â”œâ”€â”€ users.dat
â”‚   â”œâ”€â”€ questions.dat
â”‚   â””â”€â”€ results.log
â”‚â”€â”€ test/
â”‚â”€â”€ mix.exs
```